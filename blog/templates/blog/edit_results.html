{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}



{% block head_title %} {{block.super}} | Edit Result {% endblock head_title %}

{% block content %}

<button type="button" class="btn btn-success" onclick="javascript:history.back()">Back</button>

<h2><a>{% block title %}Edit Result{% endblock %}</a></h2> 


<div>
	<form method="POST">

		{% csrf_token %}

		{{ form|crispy }}

	    <table id='goal_set' class="table">
		
		{{ formset.management_form }}

		<div class="row">
		{% if formset.non_form_errors %}
	        {% for error in formset.non_form_errors %}
	            {{ error|escape }}
	        {% endfor %}
	    {% endif %}
		</div>

			{% for goal_form in formset %}
			
		        {% if forloop.first %}
		        <thead>
			        <tr>
			            {% for field in goal_form.visible_fields %}
			            <th>{{ field.label_tag }}</th>
			            {% endfor %}
			        </tr>
		        </thead>
		        {% endif %}
						    
			    <tr class='rowset_row'>

		            {% for field in goal_form.visible_fields %}

		                <td>
		                	{% if forloop.first %}

		                		{%  for hidden in goal_form.hidden_fields %}{{ hidden }}{% endfor %}
		                		{% if goal_form.instance.pk %}{{ goal_form.DELETE }}{% endif %}

		                	{% endif %}

		                	<!-- {{ field|as_crispy_field}}  -->
		                	{{ field }}

		                </td>    

		            {% endfor %}

		        </tr>		
							
			{% endfor %}

	</table>
	  
	<input type="submit" class="btn btn-success" value="Update Result" />
	</form>

</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="{% static 'js/jquery.formset.js' %}"></script>
	<script type="text/javascript">
	    $('.rowset_row').formset({
	        addText: 'add another scorer',
	        deleteText: 'remove',
	        prefix: 'goal_set' //Must prefix for inline formsets.
	    });
	</script>



{% endblock %}

