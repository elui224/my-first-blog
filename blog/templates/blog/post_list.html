{% extends 'blog/base.html' %}
 

{% block content %}
  

        <div>
            <form name="searchform" method='GET' action=''>
                <div class='input-group'>                   
                    <input class="form-control" type='text' name='search_query' placeholder='Search posts' value='{{ request.GET.search_query }}'/><span class="input-group-addon" onclick="searchform.submit()"><i class="fa fa-search fa-fw"></i></span>
                </div>
        </div>


    {% for post in posts %}

        <div class="">

            <h2><a href="{% url 'post_detail' slug=post.slug %}">{{ post.title }} {% if post.draft %} <span style='color:red;'>- Draft</span>{% endif %}</a></h2> 

            {%if post.image %}
                <a href="{% url 'post_detail' slug=post.slug %}"><img src='{{post.image.url}}' class='img-responsive'/></a>
            {% endif %}
            <div style="" class="caption">               
                <p>Posted by <a href="/">{{post.author.first_name}}</a></p>
                <div class="date">
                    <p>published: {{ post.publish_date | timesince }} ago</p>
                </div>
                <div><p>{{ post.get_html|truncatechars_html:500 }}</p></div>
                <p><a class="read-more" href="{% url 'post_detail' slug=post.slug %}">read more <i class="fa fa-angle-double-right" aria-hidden="true"></i></a></p>

            </div>

        </div>
        <hr>
        
    {% endfor %}

<!-- {% if is_paginated %}
<div class="pagination">
        <span class="page-links">
            {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}"><i class="fa fa-chevron-left" aria-hidden="true"></i> Previous</a>
            {% endif %}
            <span class="page-current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">Next <i class="fa fa-chevron-right" aria-hidden="true"></i></a>
            {% endif %}
        </span>
{% endif %}
</div> -->

{% if page_obj.has_other_pages %}
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li><a href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in page_obj.paginator.page_range %}
      {% if page_obj.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
      <li><a href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}



{% include 'blog/js.html' %}
<script type="text/javascript">

{% block jquery %}

    $(document).ready(function(){
        $(".content-markdown img").each(function(){
            $(this).addClass("img-responsive")
        })
    })

{% endblock %}
</script>


{% endblock %}	


