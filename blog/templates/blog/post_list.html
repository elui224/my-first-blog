{% extends 'blog/base.html' %}
 

{% block content %}
  

        <div>
            <form name="searchform" method='GET' action=''>
                <div class='input-group'>                   
                    <input class="form-control" type='text' name='search_query' placeholder='Search posts' value='{{ request.GET.search_query }}'/><span class="input-group-addon" onclick="searchform.submit()"><i class="fa fa-search fa-fw"></i></span>
                </div>
        </div>


    {% for post in posts %}

        <div class="">

            <h2><a href="{% url 'post_detail' slug=post.slug %}">{{ post.title }} {% if post.draft %} <span style='color:red;'>- Draft</span>{% endif %}</a></h2> 

            {%if post.image %}
                <a href="{% url 'post_detail' slug=post.slug %}"><img src='{{post.image.url}}' class='img-responsive'/></a>
            {% endif %}
            <div style="" class="caption">               
                <p>Posted by <a href="/">{{post.author.first_name}}</a></p>
                <div class="date">
                    <p>published: {{ post.publish_date | timesince }} ago</p>
                </div>
                <div><p>{{ post.get_html|truncatechars_html:500 }}</p></div>
                <p><a class="read-more" href="{% url 'post_detail' slug=post.slug %}">read more <i class="fa fa-angle-double-right" aria-hidden="true"></i></a></p>

            </div>

        </div>
        <hr>
        
    {% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if posts.has_previous %}
            <a class="" href="?page={{ posts.previous_page_number }}{% if request.GET.search_query%}&search_query={{ request.GET.search_query }}{% endif %}"><i class="fa fa-chevron-left" aria-hidden="true"></i> Previous</a>
        {% endif %}

        <span class="current">
            page {{ posts.number }} of {{ posts.paginator.num_pages }}
        </span>

        {% if posts.has_next %}
            <a class="" role="button" href="?page={{ posts.next_page_number }}{% if request.GET.search_query%}&search_query={{ request.GET.search_query }}{% endif %}">Next <i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        {% endif %}
    </span>
</div>

{% include 'blog/js.html' %}
<script type="text/javascript">

{% block jquery %}

    $(document).ready(function(){
        $(".content-markdown img").each(function(){
            $(this).addClass("img-responsive")
        })
    })

{% endblock %}
</script>


{% endblock %}	


